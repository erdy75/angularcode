<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Steps to Configure Amazon EC2 for NodeJS app deployment</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css">

    <meta name="description" content="In this tutorial I will show you, how to configure Amazon EC2 server for an NodeJS app. Login to your Amazon EC2 server and execute the following commands">
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="canonical" href="https://angularcode.com/steps-to-configure-amazon-ec2-for-nodejs-app-deployment/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="https://angularcode.com/steps-to-configure-amazon-ec2-for-nodejs-app-deployment/amp/">
    
    <meta property="og:site_name" content="AngularCode">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Steps to Configure Amazon EC2 for NodeJS app deployment">
    <meta property="og:description" content="In this tutorial I will show you, how to configure Amazon EC2 server for an NodeJS app. Login to your Amazon EC2 server and execute the following commands">
    <meta property="og:url" content="https://angularcode.com/steps-to-configure-amazon-ec2-for-nodejs-app-deployment/">
    <meta property="og:image" content="../content/images/2018/02/configure-amacon-ec2-for-nodejs-app-seployment_li3os1.png">
    <meta property="article:published_time" content="2016-04-15T06:18:00.000Z">
    <meta property="article:modified_time" content="2018-02-17T09:10:21.000Z">
    <meta property="article:tag" content="Cloud">
    
    <meta property="article:publisher" content="https://www.facebook.com/itswadesh">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Steps to Configure Amazon EC2 for NodeJS app deployment">
    <meta name="twitter:description" content="In this tutorial I will show you, how to configure Amazon EC2 server for an NodeJS app. Login to your Amazon EC2 server and execute the following commands">
    <meta name="twitter:url" content="https://angularcode.com/steps-to-configure-amazon-ec2-for-nodejs-app-deployment/">
    <meta name="twitter:image" content="https://angularcode.com/content/images/2018/02/configure-amacon-ec2-for-nodejs-app-seployment_li3os1.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Swadesh Behera">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="Cloud">
    <meta name="twitter:site" content="@itswadesh">
    <meta property="og:image:width" content="550">
    <meta property="og:image:height" content="220">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "AngularCode",
        "logo": {
            "@type": "ImageObject",
            "url": "https://angularcode.com/content/images/2018/02/5425b84b5a2eba9586e09d682524ea98.jpeg",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Swadesh Behera",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/5425b84b5a2eba9586e09d682524ea98?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "https://angularcode.com/author/swadesh/",
        "sameAs": []
    },
    "headline": "Steps to Configure Amazon EC2 for NodeJS app deployment",
    "url": "https://angularcode.com/steps-to-configure-amazon-ec2-for-nodejs-app-deployment/",
    "datePublished": "2016-04-15T06:18:00.000Z",
    "dateModified": "2018-02-17T09:10:21.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://angularcode.com/content/images/2018/02/configure-amacon-ec2-for-nodejs-app-seployment_li3os1.png",
        "width": 550,
        "height": 220
    },
    "keywords": "Cloud",
    "description": "In this tutorial I will show you, how to configure Amazon EC2 server for an NodeJS app. Login to your Amazon EC2 server and execute the following commands",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://angularcode.com/"
    }
}
    </script>

    <script type="text/javascript" src="../public/ghost-sdk.js"></script>
<script type="text/javascript">
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "91101e88ae96"
});
</script>
    <meta name="generator" content="Ghost 1.21">
    <link rel="alternate" type="application/rss+xml" title="AngularCode" href="https://angularcode.com/rss/">

</head>
<body class="post-template tag-cloud">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="../"><img src="../content/images/2018/02/5425b84b5a2eba9586e09d682524ea98.jpeg" alt="AngularCode"></a>
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="../">Home</a></li>
    <li class="nav-nodejs" role="menuitem"><a href="../tag/nodejs/">NodeJS</a></li>
    <li class="nav-angularjs" role="menuitem"><a href="../tag/angular1/">AngularJS</a></li>
    <li class="nav-php" role="menuitem"><a href="../tag/php/">PHP</a></li>
    <li class="nav-about" role="menuitem"><a href="../about/">About</a></li>
</ul>

    </div>
    <div class="site-nav-right">
        <div class="social-links">
                <a class="social-link social-link-fb" href="https://www.facebook.com/itswadesh" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
</a>
                <a class="social-link social-link-tw" href="https://twitter.com/itswadesh" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
        </div>
            <a class="subscribe-button" href="#subscribe">Subscribe</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-cloud ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2016-04-15">15 April 2016</time>
                        <span class="date-divider">/</span> <a href="../tag/cloud/">Cloud</a>
                </section>
                <h1 class="post-full-title">Steps to Configure Amazon EC2 for NodeJS app deployment</h1>
            </header>

            <figure class="post-full-image" style="background-image: url(../content/images/2018/02/configure-amacon-ec2-for-nodejs-app-seployment_li3os1.png)">
            </figure>

            <section class="post-full-content">
                <div class="kg-card-markdown"><p>In this tutorial I will show you, how to configure Amazon EC2 server for an NodeJS app. Login to your Amazon EC2 server and execute the following commands.  </p>
<h2 id="installnodejs">Install NodeJS</h2>
<p><code>$: sudo apt-get update 
$: sudo apt-get install -y python-software-properties python g++ make $: sudo add-apt-repository ppa:chris-lea/node.js 
$: sudo apt-get update 
$: sudo apt-get install nodejs 
$: sudo apt-get install git 
$: sudo npm install forever -g</code></p>
<h2 id="initializetheremotegitrepo">Initialize the remote git repo</h2>
<p><code>$: cd ~/ $: mkdir repo/ 
$: cd repo $: git init --bare</code></p>
<h2 id="configurehooks">Configure hooks</h2>
<p><code>$: cd repo/hooks/ 
$: cat &gt; post-receive #!/bin/sh GIT_WORK_TREE=/home/ec2-user/www export GIT_WORK_TREE git checkout -f cd $HOME/www ./start.sh</code></p>
<p>$: <code>chmod +x post-receive</code></p>
<h2 id="automatethedeploymentprocess">Automate the deployment process</h2>
<p><code>$: mkdir www/ 
$: cd ~/www/ $: cat &gt; start.sh # this file is execute by post-receive everytime a Git Commit is made # Path: /home/ec2-user/repo/hooks/post-receive forever stopall NODE_ENV='production' forever start server</code></p>
<p><code>$: chmod +x start.sh</code></p>
<p><em>Copy content of <code>C:\Users\&lt;your_username&gt;\.sshid_rsa.pub</code> to remote Machine at .ssh folder </em></p>
<p><code>$: sudo vi .ssh/authorized_keys</code></p>
<h2 id="addthefollowinglinetolocalmachinedistgitconfig">Add the following line to Local Machine (dist/.git/config)</h2>
<p><code>[remote "origin"] url = ssh://ec2-user@&lt;your_server_ip&gt;/home/ec2-user/repo fetch = +refs/heads/*:refs/remotes/repo/* puttykeyfile = C:\Users\&lt;your_username&gt;\.ssh\aws.ppk &lt;/your_username&gt;&lt;/your_server_ip&gt;</code></p>
<p>Local Machine: <code>Git push</code></p>
<p>Open http port from ec2 dashboard <br>
 Check with the command 
<code>NODE_ENV=production 
node server</code></p>
<h2 id="configureiptablestoredirectallincomingconnectionstoport8080">Configure IP tables to redirect all incoming connections to port 8080</h2>
<p><code>$: sudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8080 
$: sudo iptables -t nat -L -n --line-number</code></p>
<h2 id="installmongodbatamazonec2">Install MongoDB at amazon-ec2</h2>
<p><a href="https://docs.mongodb.org/ecosystem/platforms/amazon-ec2/">How to install Mongo Database at amazon-ec2</a></p></div>
            </section>

            <section class="subscribe-form">
                <h3 class="subscribe-form-title">Subscribe to AngularCode</h3>
                <p>Get the latest posts delivered right to your inbox</p>
                <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"><input class="location" type="hidden" name="location"><input class="referrer" type="hidden" name="referrer">

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email" placeholder="youremail@example.com">
    </div>
    <button class="" type="submit"><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>


            </section>

            <footer class="post-full-footer">

                <section class="author-card">
                        <img class="author-profile-image" src="//www.gravatar.com/avatar/5425b84b5a2eba9586e09d682524ea98?s=250&d=mm&r=x" alt="Swadesh Behera">
                    <section class="author-card-content">
                        <h4 class="author-card-name"><a href="../author/swadesh/">Swadesh Behera</a></h4>
                            <p>Software Architect, Thinker, Innovator from India</p>
                    </section>
                </section>
                <div class="post-full-footer-right">
                    <a class="author-card-button" href="../author/swadesh/">Read More</a>
                </div>

            </footer>


        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">

                <article class="post-card post tag-getting-started">
        <a class="post-card-image-link" href="../themes/">
            <div class="post-card-image" style="background-image: url(https://casper.ghost.org/v1.0.0/images/design.jpg)"></div>
        </a>
    <div class="post-card-content">
        <a class="post-card-content-link" href="../themes/">
            <header class="post-card-header">
                    <span class="post-card-tags">Getting Started</span>
                <h2 class="post-card-title">Setting up your own Ghost theme</h2>
            </header>
            <section class="post-card-excerpt">
                <p>Creating a totally custom design for your publication Ghost comes with a beautiful default theme called Casper, which is designed to be a clean, readable publication layout and can be easily adapted for</p>
            </section>
        </a>
        <footer class="post-card-meta">
            <span class="post-card-author"><a href="../author/ghost/">Ghost</a></span>
        </footer>
    </div>
</article>

                <article class="post-card post tag-php tag-mysql">
        <a class="post-card-image-link" href="../send-email-with-pdf-attachment-using-php/">
            <div class="post-card-image" style="background-image: url(../content/images/2018/02/send-email-with-pdf-attachment-using-php_vgpewo.png)"></div>
        </a>
    <div class="post-card-content">
        <a class="post-card-content-link" href="../send-email-with-pdf-attachment-using-php/">
            <header class="post-card-header">
                    <span class="post-card-tags">PHP</span>
                <h2 class="post-card-title">Send email with PDF attachment using PHP</h2>
            </header>
            <section class="post-card-excerpt">
                <p>Sometimes we may need to send email from our website to the client with some attachment. In this tutorial we will query the MySQL database to get the updated data from our table</p>
            </section>
        </a>
        <footer class="post-card-meta">
                <img class="author-profile-image" src="//www.gravatar.com/avatar/5425b84b5a2eba9586e09d682524ea98?s=250&d=mm&r=x" alt="Swadesh Behera">
            <span class="post-card-author"><a href="../author/swadesh/">Swadesh Behera</a></span>
        </footer>
    </div>
</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="../">
                <img src="../content/images/2018/02/5425b84b5a2eba9586e09d682524ea98_rrk_icon.ico" alt="AngularCode icon">
            <span>AngularCode</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Steps to Configure Amazon EC2 for NodeJS app deployment</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Steps%20to%20Configure%20Amazon%20EC2%20for%20NodeJS%20app%20deployment&url=https://angularcode.com/steps-to-configure-amazon-ec2-for-nodejs-app-deployment/" onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://angularcode.com/steps-to-configure-amazon-ec2-for-nodejs-app-deployment/" onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="../">AngularCode</a> &copy; 2018</section>
                <nav class="site-footer-nav">
                    <a href="../">Latest Posts</a>
                    <a href="https://www.facebook.com/itswadesh" target="_blank" rel="noopener">Facebook</a>
                    <a href="https://twitter.com/itswadesh" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <div id="subscribe" class="subscribe-overlay">
        <a class="subscribe-overlay-close" href="#"></a>
        <div class="subscribe-overlay-content">
                <img class="subscribe-overlay-logo" src="../content/images/2018/02/5425b84b5a2eba9586e09d682524ea98.jpeg" alt="AngularCode">
            <h1 class="subscribe-overlay-title">Subscribe to AngularCode</h1>
            <p class="subscribe-overlay-description">Stay up to date! Get all the latest &amp; greatest posts delivered straight to your inbox</p>
            <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"><input class="location" type="hidden" name="location"><input class="referrer" type="hidden" name="referrer">

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email" placeholder="youremail@example.com">
    </div>
    <button class="" type="submit"><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>


        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js"></script>


    

    

</body>
</html>
